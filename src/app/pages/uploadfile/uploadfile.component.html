<div class="nav">
    <app-navbar></app-navbar>
</div>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@200;400&display=swap" rel="stylesheet">
<body>
    <br>
    <span style=" font-weight: bold;font-size: 36px;color: #000;padding-left: 42%; margin-top: 50%;">
        File Upload<br>
    </span>


    <div class="image" *ngIf="!this.isUpload">
        <img src="../assets/img/warn.png" width="32" >
    </div>
    
    <span *ngIf="!this.isUpload" style="padding-left: 32%; font-size: 16px; font-family: 'Kanit', sans-serif; font-weight: normal; text-align: left; color: #F8972C;">*warning* <br></span>
    <span *ngIf="!this.isUpload" style="padding-left: 32%;font-size: 16px; font-family: 'Kanit', sans-serif; font-weight: normal; text-align: left;">&#x2022; ผู้ใช้สามารถ upload ได้เฉพาะไฟล์เสียงหรือวิดีโอเท่านั้น<br></span>
    <span *ngIf="!this.isUpload" style="padding-left: 32%;font-size: 16px; font-family: 'Kanit', sans-serif; font-weight: normal; text-align: left;">&#x2022; ถ้าผู้ใช้ upload file ที่มีความยาวเกิน 1 ชั่วโมง ระบบจะตัดให้เหลือเพียง 1 ชั่วโมงเท่านั้น<br></span>


    <!-- <div class="cover"></div> -->
    <p-toast position="top-right" key="tr"></p-toast>
    <div>
        <label for="images" class="drop-container">
            <span class="drop-title">Drop file here</span>
            or
            <input #fileUploader type="file" id="images" accept="audio/*,video/*" (change)="chooseFile($event)">
            
        </label>
        <app-audio-recording></app-audio-recording>
    </div>
    <div class="spinner" *ngIf="this.isSpinner">
        <p-progressSpinner [style]="{width: '50px', height: '50px'}" styleClass="custom-spinner" strokeWidth="8"
            fill="var(--surface-ground)" animationDuration=".8s"></p-progressSpinner>
    </div>
    <div class="box" *ngIf="this.isChoosed">
        <br>
        <div>
            <video [src]="url" *ngIf="this.isVideo" height="200" controls></video>
            <video [src]="url" *ngIf="!this.isVideo" height="50" width="350" controls></video>
        </div>
        <div class="result">
            <span class="icon" style="vertical-align: middle;">
                <svg *ngIf="this.isVideo" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor"
                    class="bi bi-file-earmark-play" viewBox="0 0 16 16">
                    <path
                        d="M6 6.883v4.234a.5.5 0 0 0 .757.429l3.528-2.117a.5.5 0 0 0 0-.858L6.757 6.454a.5.5 0 0 0-.757.43z" />
                    <path
                        d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
                </svg>
                <svg *ngIf="this.isVideo==false" xmlns="http://www.w3.org/2000/svg" width="26" height="26"
                    fill="currentColor" class="bi bi-file-earmark-music" viewBox="0 0 16 16">
                    <path
                        d="M11 6.64a1 1 0 0 0-1.243-.97l-1 .25A1 1 0 0 0 8 6.89v4.306A2.572 2.572 0 0 0 7 11c-.5 0-.974.134-1.338.377-.36.24-.662.628-.662 1.123s.301.883.662 1.123c.364.243.839.377 1.338.377.5 0 .974-.134 1.338-.377.36-.24.662-.628.662-1.123V8.89l2-.5V6.64z" />
                    <path
                        d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
                </svg>
            </span>
            {{status}} {{this.duration}}
        </div>
        <div style="width: 38%; float:right">
            <link rel="stylesheet"
                href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <button (click)="upload()"><i class="fa fa-upload" aria-hidden="true"></i> Upload</button>
            <button style="background-color: #bc1a1a;" (click)="resetFileUploader()"><i class="fa fa-trash-o fa-lg"></i>
                Clear</button>
        </div>
    </div>
    <!-- *ngIf="this.isUpload" -->
    
        <div *ngIf="this.isUpload" class="image" style="top: 650px; left: 404px;">
            <img src="../assets/img/warn.png" width="32">
        </div>
        <span *ngIf="this.isUpload" style="padding-left: 30%; font-size: 16px; font-family: 'Kanit', sans-serif; font-weight: normal; text-align: left; color: #F8972C;">
            *warning* <br>
        </span>
        <span *ngIf="this.isUpload" style="padding-left: 30%;font-size: 16px; font-family: 'Kanit', sans-serif; font-weight: normal; ">
            ในกรณีที่ไฟล์มีขนาดใหญ่ระบบอาจใช้เวลาในการประมวลผลนานกว่าปกติ<br>
        </span>
        <span *ngIf="this.isUpload" style="padding-left: 30%;font-size: 16px; font-family: 'Kanit', sans-serif; font-weight: normal; ">
            หากท่านต้องการรับแจ้งเตือนเมื่อประมวลผลเสร็จ กรุณากรอก e-mail ด้านล่าง (ไม่จำเป็น)</span>
        <br><br>
    <div *ngIf="this.isUpload">      
        <span class="p-float-label" style="width: 12rem; position: absolute;left: 600px;">
            <input #email id="float-input" type="text" pInputText [(ngModel)]="value2">
            <label for="float-input">E-mail</label>
        </span>
        <br><br><br>
      
        <a class="link" href="/Result">
            <button (click)="sendMail(email.value)" href="/Result" >Get Process</button>
        </a>  
    </div>



   

</body>